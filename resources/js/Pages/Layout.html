<div x-data="AlpineLayout">
    <div style="position: fixed; bottom: 0; right: 0; z-index: 9999;" role="alert" x-transition
        x-show="showNotification" class="message is-link m-5">
        <div class="message-header">
            <p>Message</p>
            <button x-on:click="showNotification = false" class="delete" aria-label="delete"></button>
        </div>
        <div class="message-body" x-text="notification"></div>
    </div>

    <header class="hero is-link">
        <div class="hero-body">
            <h1 class="title" x-text="title"></h1>
            <p class="subtitle" x-text="subtitle"></p>
        </div>
    </header>

    <div class="columns">
        <div class="column is-narrow">
            <nav class="menu px-5 pt-6">
                <p class="menu-label">
                    CRM
                </p>
                <ul class="menu-list">
                    <li><a x-bind:class="window.location.pathname === '/' ? 'is-active' : ''" data-inertia-link
                            href="/">Dashboard</a></li>
                    <li><a x-bind:class="window.location.pathname.startsWith('/todos') ? 'is-active' : ''"
                            data-inertia-link href="/todos">Todos</a></li>
                </ul>
            </nav>
        </div>
        <div class="column">
            <main style="min-height: 73vh;" data-inertia-slot></main>
        </div>
    </div>

    <footer class="footer">
        <div class="content has-text-centered">
            <p>
                &copy;
                <span notranslate x-text="company"></span>
                <time x-text="year"></time>
            </p>
        </div>
    </footer>
</div>

<script>
    function AlpineLayout() {
        return {
            init: function () {
                if (Inertia.page.props.status !== null) {
                    this.notification = Inertia.page.props.status
                    this.showNotification = true
                    setTimeout(() => {
                        this.showNotification = false
                    }, 3000)
                }
            },
            title: 'CRM',
            subtitle: 'CRM Example with Inertia and Alpine',
            company: 'ACME',
            year: new Date().getFullYear(),
            showNotification: false,
            notification: '',
        }
    }
</script>
